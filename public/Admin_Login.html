<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin-Login</title>
</head>

<body>
    <span>Brukernavn: </span>
    <input type="text" id="impUsername" value="carlvonlinne@helseflora.no">
    <span>Passord: </span>
    <input type="text" id="impPassword" value="busybee_taxonomy">
    <br>
    <br><button id="btnLogin">Login</button>
    <br>
    <h2 id="txtResult">Resultat..</h2>
    <img id="imgUser">
    <br>
    <br>

    <div id ="allButtons">

    </div>



   <script>

        let impUsername = document.getElementById("impUsername");
        let impPassword = document.getElementById("impPassword");
        let btnLogin = document.getElementById("btnLogin");
        let txtResult = document.getElementById("txtResult");
        let imgUser = document.getElementById("imgUser");

        let allButtons = document.getElementById("allButtons");



    btnLogin.addEventListener("click", async function(evt){
        let username = impUsername.value;
        let password = impPassword.value;
        let cred = createBasicAuthString(username, password);
        console.log(cred);

        let cfg = {
            method: "POST",
            headers: {"authorization": cred },
        }

        try {
            let response = await fetch(url, cfg);
            let data = await response.json();

            if(response.status != 200){
                throw new Error("login failed!");
            }
            else if (response.status === 200){
                document.getElementById("allButtons").style.display = "none";
            }
            
            imgUser.src = data.logindata.thumb;
            txtResult.innerHTML = "Login Successfully!";
            console.log(data);
        }
        catch(error){
            console.log(error);
        }

    });









    function createBasicAuthString(username, password) {
            let combinedStr = username + ":" + password;
            let b64Str = btoa(combinedStr);
            return "basic " + b64Str; //return the basic authentication string
        }

   </script> 







    
</body>
</html>